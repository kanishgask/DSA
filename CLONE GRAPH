âœ… QUESTION 3: CLONE GRAPH

ğŸ“Œ Asked in: Google, Amazon, Microsoft
ğŸ“Œ Concepts: Graph, DFS / BFS, HashMap
ğŸ“Œ Difficulty: Mediumâ€“Hard
ğŸ“Œ Very common follow-up after graph basics

ğŸ” Problem Statement

You are given a reference to a node in a connected undirected graph.

Each node has:

an integer value val

a list of neighbors neighbors

ğŸ‘‰ Your task is to return a deep copy (clone) of the entire graph.

â— Deep copy means:

New nodes

Same structure

No reference to original nodes

ğŸ§ª Example
Graph
1 --- 2
|     |
4 --- 3

Output

A cloned graph with new nodes but same connections.

ğŸ§  Core Idea (VERY IMPORTANT)

Graphs can have:

Cycles

Multiple connections

ğŸ‘‰ If we clone a node more than once, structure breaks.

ğŸ’¡ Solution:

Use a HashMap:

Original node â†’ Cloned node


So each node is cloned only once.

ğŸ› ï¸ Algorithm (DFS Approach)

1ï¸âƒ£ Create a HashMap<Node, Node>
2ï¸âƒ£ Start DFS from given node
3ï¸âƒ£ If node already cloned â†’ return it
4ï¸âƒ£ Otherwise:

Clone the node

Store it in map

Recursively clone neighbors

â±ï¸ Complexity
Type	Value
Time	O(V + E)
Space	O(V)
ğŸ’» Java Code (Interview-Ready)
class Solution {

    Map<Node, Node> map = new HashMap<>();

    public Node cloneGraph(Node node) {

        if (node == null) return null;

        if (map.containsKey(node)) {
            return map.get(node);
        }

        Node clone = new Node(node.val);
        map.put(node, clone);

        for (Node neighbor : node.neighbors) {
            clone.neighbors.add(cloneGraph(neighbor));
        }

        return clone;
    }
}

ğŸ§¾ Line-by-Line Explanation
Map<Node, Node> map = new HashMap<>();


â¡ï¸ Stores original node â†’ cloned node mapping

if (map.containsKey(node))


â¡ï¸ Prevents infinite loop due to cycles

Node clone = new Node(node.val);


â¡ï¸ Create a new node with same value

clone.neighbors.add(cloneGraph(neighbor));


â¡ï¸ Recursively clone neighbors

ğŸ§ª Dry Run Example

Start at node 1:

Clone 1

Go to 2, clone it

Go to 3, clone it

Back edge to 1 â†’ already cloned â†’ reused

âœ” No duplicates
âœ” Proper cycle handling

ğŸ¯ Why Interviewers Love This Question

âœ” Tests deep graph understanding
âœ” Tests recursion + hashmap
âœ” Very common FAANG question
âœ” Many candidates fail at cycle handling
